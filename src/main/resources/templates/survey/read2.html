<!DOCTYPE html>
<html layout:decorate="~{layout}"> <!-- layout.html 상속 -->

<head>
    <style>
        .progress-bar {
            width: 100%;
            height: 30px;
            background-color: #dedede;
            font-weight: 600;
            font-size: .8rem;
        }

        .progress-bar .progress {
            height: 30px;
            padding: 0;
            text-align: center;
            background-color: #98FB98;
            color: #111;
        }

        .content-wrapper {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 20px;
        }

        .content-image {
            flex: 1 1 40%;
            max-width: 40%;
        }

        .content-info {
            flex: 1 1 60%;
            display: flex;
            flex-direction: column;
        }

        .progress-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .progress-item .progress-bar-wrapper {
            flex-grow: 1;
            margin-left: 10px;
        }

        .progress-item span {
            flex-shrink: 0;
            width: 100px;
            font-size: 1.2em;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div layout:fragment="content">

        <div class='menu_line'></div>

        <fieldset class="fieldset_basic">
            <ul>
                <li class="li_none">
                    <div class="content-wrapper">
                        <!-- 이미지 섹션 -->
                        <div class="content-image" 
                             th:if="${surveyVO.poster != null and (surveyVO.poster.endsWith('jpg') or surveyVO.poster.endsWith('png') or surveyVO.poster.endsWith('gif'))}">
                            <img th:src="@{|/survey/storage/${surveyVO.postersaved}|}"
                                 style="width: 100%; background-color: white;">
                        </div>

                        <!-- 텍스트 및 프로그래스 바 섹션 -->
                        <div class="content-info">
                            <!-- 텍스트 -->
                            <div>
                                <span style="font-size: 2em; font-weight: bold;" th:text="${surveyVO.topic}"></span><br>
                                <!--<span style="font-size: 1em;" th:text="${surveyVO.startdate}"></span><br><br>
                                <div style="white-space: pre-wrap;"><span th:text="${surveyVO.enddate}"></span></div> -->
                                  <br>
                                  <br>
                                
                            </div>

                            <!-- 프로그래스 바 -->
                            <div th:each="surveyitem, i : ${surveyitemVO}" class="progress-item">
                                <span th:text="${surveyitem.item}"></span>
                                <span th:text="${surveyitem.itemcnt + '표'}" style="font-size: 0.8em;"></span>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar">
                                        <div class="progress-bar">
    <div class="progress"
         th:if="${cntsum > 0}"
         th:style="'width: ' + (${surveyitem.itemcnt} / ${cntsum}) * 100 + '%'">
        <!-- Progress Bar Width -->
    </div>
    <div class="progress"
         th:if="${cntsum == 0}"
         th:style="'width: 0%'">
        <!-- Default Progress Bar -->
    </div>
</div>
  
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </fieldset>
    </div>
</body>

</html>
